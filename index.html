<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manon Boycott Feed</title>
<link rel="icon" type="image/png" href="favicon.png">
<style>
body { font-family:sans-serif; background:#f7f7f7; text-align:center; padding:20px; }
button { background:#ff4d4f; color:white; border:none; padding:12px 24px; font-size:16px; cursor:pointer; border-radius:6px; margin-bottom:20px; }
.modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content { background:white; padding:20px; border-radius:12px; max-width:600px; position:relative; }
.modal-content img { width:100%; border-radius:8px; }
.close-btn { position:absolute; top:10px; right:15px; font-size:20px; cursor:pointer; }
#feed { max-width:600px; margin:0 auto; overflow:hidden; }
.tweet { background:white; margin:10px 0; padding:10px; border-radius:6px; opacity:0; transform:translateY(20px); transition:all 0.5s ease; }
.tweet.show { opacity:1; transform:translateY(0); }
.tweet strong { display:block; margin-bottom:4px; }
.tweet a { text-decoration:none; color:#ff4d4f; }
</style>
</head>
<body>

<button id="infoBtn">view boycott information</button>
<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <img src="boycott.png" alt="Boycott Info">
  </div>
</div>

<div id="feed"></div>

<script>
const modal = document.getElementById('modal');
document.getElementById('infoBtn').onclick = () => modal.style.display='flex';
document.querySelector('.close-btn').onclick = () => modal.style.display='none';
window.onclick = e => { if(e.target==modal) modal.style.display='none'; }

const feed = document.getElementById('feed');
const displayed = {};

// rss2json endpoint
const RSS_URL = 'https://rss.app/feeds/3dWSkwTparYVwFFT.xml';
const API_URL = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(RSS_URL)}`;

async function fetchRSS() {
  try {
    const res = await fetch(API_URL);
    const data = await res.json();
    const items = data.items || [];

    items.reverse().forEach(item => {
      if(!displayed[item.link]){
        displayed[item.link] = true;

        const div = document.createElement('div');
        div.className='tweet';
        div.innerHTML = `<strong><a href="${item.link}" target="_blank">${item.title}</a></strong>${item.content}<br><small>${new Date(item.pubDate).toLocaleString()}</small>`;
        feed.prepend(div);

        setTimeout(()=>div.classList.add('show'),50);
      }
    });
  } catch(e) {
    console.error('Failed to fetch RSS', e);
  }
}

// initial fetch + refresh every 60s
fetchRSS();
setInterval(fetchRSS,60000);

// auto-scroll
setInterval(()=>{
  if(feed.firstChild){
    const first = feed.firstChild;
    feed.appendChild(first);
  }
},5000);
</script>

</body>
</html>
